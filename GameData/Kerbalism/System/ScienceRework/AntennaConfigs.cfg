// ====================================================================================================================================================================================================================================
// ====================================================================================================================================================================================================================================
														//THERE IS NOTHING TO BE TWEAKED IN THIS CONFIG! ALL TWEAKS SHOULD BE DONE FROM TWEAKABLES FOLDER
// ====================================================================================================================================================================================================================================
// ====================================================================================================================================================================================================================================

// ============================================================================
// Global Nuke. No ifs or buts. Stuff's way too overpowered for Kerbalism.
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[~antennaType[INTERNAL]]]:NEEDS[FeatureScience,!RemoteTech]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$antennaPower$         			// this needs tweaking. too big of a nerf i believe. possibly nerf antennas based on antennaType. will double check later
		@packetSize /= 1000000
		@packetSize != 0.5
		%packetResourceCost = #$packetSize$
	}
}

// ============================================================================
// per part tweaks, as specified in KERBALISM_ANTENNA_RATES
// ============================================================================
@PART[kerbalism-antenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_8/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_8/ECCost$
	}
}

@PART[longAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_16/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_16/ECCost$
	}
}

@PART[SurfAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_16S/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_16S/ECCost$
	}
}

@PART[mediumDishAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_DT_SM1/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_DT_SM1/ECCost$
	}
}

@PART[commDish]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_88-88/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_88-88/ECCost$
	}
}

@PART[HighGainAntenna5]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/HG-5/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/HG-5/ECCost$
	}
}

@PART[HighGainAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/HG-55/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/HG-55/ECCost$
	}
}

@PART[RelayAntenna5]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/RA-2/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/RA-2/ECCost$
	}
}

@PART[RelayAntenna50]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/RA-15/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/RA-15/ECCost$
	}
}

@PART[RelayAntenna100]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/RA-100/Bandwidth$
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/RA-100/ECCost$
	}
}

// ============================================================================
// Applying the true values from KERBALISM_ANTENNA_RATES
// (calculations to apply proper rates)
// This is done globally, to account for patched mods. (assuming patch ordering is kept consistent by everyone)
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[~antennaType[INTERNAL]]]:NEEDS[FeatureScience,!RemoteTech]:AFTER[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		@packetSize /= 1024
		@packetResourceCost /= 60
		%packetInterval = 1

		UPGRADES
		{
			UPGRADE
			{
				name__ = Antenna-Upgrade1
				techRequired__ = #$../../../@KERBALISM_ANTENNA_RATES/Upgrades/FirstUpgradeTech$
				packetSize = #$../../#packetSize$
				@packetSize *= #$../../../@KERBALISM_ANTENNA_RATES/Upgrades/FirstUpgrade$
			}
			UPGRADE
			{
				name__ = Antenna-Upgrade2
				techRequired__ = #$../../../@KERBALISM_ANTENNA_RATES/Upgrades/SecondUpgradeTech$
				packetSize = #$../../#packetSize$
				@packetSize *= #$../../../@KERBALISM_ANTENNA_RATES/Upgrades/SecondUpgrade$
			}
		}
	}
}

// ============================================================================
// BABY DON'T HURT ME NO MORE! (Upgrades)
// ============================================================================
PARTUPGRADE:NEEDS[FeatureScience]
{
  name = Antenna-Upgrade1
  partIcon = longAntenna
  techRequired = whatever
  entryCost = whatever
  title = Increase data rates
  manufacturer = KT&T
  description = Latest developments in radio and telecommunications allow for higher transmission rates
}
@PARTUPGRADE[Antenna-Upgrade1]:NEEDS[FeatureScience]
{
  @techRequired = #$@KERBALISM_ANTENNA_RATES/Upgrades/FirstUpgradeTech$
  @entryCost = #$@KERBALISM_ANTENNA_RATES/Upgrades/FirstUpgradeEntryCost$
}

PARTUPGRADE:NEEDS[FeatureScience]
{
  name = Antenna-Upgrade2
  partIcon = HighGainAntenna5
  techRequired = electronics
  entryCost = 3500
  title = Signal Processor Boost
  manufacturer = KT&T
  description = Multiband transmission give a big boost in transmission rates
}
@PARTUPGRADE[Antenna-Upgrade2]:NEEDS[FeatureScience]
{
  @techRequired = #$@KERBALISM_ANTENNA_RATES/Upgrades/SecondUpgradeTech$
  @entryCost = #$@KERBALISM_ANTENNA_RATES/Upgrades/SecondUpgradeEntryCost$
}
