// ============================================================================
// KERBALISM_ANTENNA_RATES - Temporary tweaking values
// ============================================================================
// Tweaking hints
// Bandwidth in kB/s, ECCost in EC/min
// I honestly doubt this needs more explaining.
// ============================================================================
// Antenna values that actually make sense for Kerbalism's science
// The idea is to be very restrictive in the beginning and increase data 
// rates with tech upgrades.
// Ingame numbers won't be pretty, but the numbers set in KERBALISM_ANTENNA_RATES
// are the true transmission rates in kB/s
// ============================================================================
KERBALISM_ANTENNA_RATES
// ====================================================================================================================================================================================================================================
													//MAKE SURE NO FIELDS ARE LEFT EMPTY OR COMMENTED OUT IN THIS SECTION, OTHERWISE MM WILL THROW ERRORS
// ====================================================================================================================================================================================================================================
{
	Communotron_8				// Communotron 8 (kerbalism-antenna)
	{
		Bandwidth = 2
		ECCost = 0.7
	}
	
	Communotron_16				// Communotron 16
	{
		Bandwidth = 3
		ECCost = 1.2
	}
	
	Communotron_16S				// Communotron 16-S
	{
		Bandwidth = 3
		ECCost = 1.2
	}	
	
	Communotron_DT_SM1			// Communotron DTS-M1
	{
		Bandwidth = 8
		ECCost = 3.4
	}
	
	Communotron_88-88			// Communotron 88-88
	{
		Bandwidth = 24
		ECCost = 24
	}
	
	HG-5							// HG-5 High Gain Antenna
	{
		Bandwidth = 4
		ECCost = 5
	}	
	
	HG-55						// Communotron HG-55
	{
		Bandwidth = 15
		ECCost = 12
	}	
	
	RA-2						// RA-2 Relay Antenna
	{
		Bandwidth = 4.5
		ECCost = 4
	}	
	
	RA-15						// RA-15 Relay Antenna
	{
		Bandwidth = 7.5
		ECCost = 16
	}	
	
	RA-100						// RA-100 Relay Antenna
	{
		Bandwidth = 12
		ECCost = 30
	}	
}

// ====================================================================================================================================================================================================================================
// ====================================================================================================================================================================================================================================
															//THERE IS NOTHING TO BE TWEAKED FURTHER. ALL CHANGES SHOULD BE DONE ABOVE THIS TEXT! 
// ====================================================================================================================================================================================================================================
// ====================================================================================================================================================================================================================================

// ============================================================================
// Global Nuke. No ifs or buts. Stuff's way too overpowered for Kerbalism.
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[~antennaType[INTERNAL]]]:NEEDS[FeatureScience,!RemoteTech]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$antennaPower$         			// this needs tweaking. too big of a nerf i believe. possibly nerf antennas based on antennaType. will double check later
		@packetSize /= 1000000                
		@packetSize != 0.5                    
		%packetResourceCost = #$packetSize$
	}
}

// ============================================================================
// per part tweaks, as specified in KERBALISM_ANTENNA_RATES 
// ============================================================================
@PART[kerbalism-antenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_8/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_8/ECCost$ 
	}
}

@PART[longAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_16/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_16/ECCost$ 
	}
}

@PART[SurfAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_16S/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_16S/ECCost$ 
	}
}

@PART[mediumDishAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_DT_SM1/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_DT_SM1/ECCost$ 
	}
}

@PART[commDish]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/Communotron_88-88/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/Communotron_88-88/ECCost$ 
	}
}

@PART[HighGainAntenna5]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/HG-5/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/HG-5/ECCost$ 
	}
}

@PART[HighGainAntenna]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/HG-55/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/HG-55/ECCost$ 
	}
}

@PART[RelayAntenna5]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/RA-2/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/RA-2/ECCost$ 
	}
}

@PART[RelayAntenna50]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/RA-15/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/RA-15/ECCost$ 
	}
}

@PART[RelayAntenna100]:NEEDS[FeatureScience,!RemoteTech]:FOR[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		%packetSize = #$@KERBALISM_ANTENNA_RATES/RA-100/Bandwidth$               
		%packetResourceCost = #$@KERBALISM_ANTENNA_RATES/RA-100/ECCost$ 
	}
}

// ============================================================================
// Applying the true values from KERBALISM_ANTENNA_RATES
// (calculations to apply proper rates)
// This is done globally, to account for patched mods. (assuming patch ordering is kept consistent by everyone)
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[~antennaType[INTERNAL]]]:NEEDS[FeatureScience,!RemoteTech]:AFTER[Kerbalism]
{
	@MODULE[ModuleDataTransmitter]
	{
		@packetSize /= 1024
		@packetResourceCost /= 60
		%packetInterval = 1
	}
}

// ============================================================================
// BABY DON'T HURT ME NO MORE! (Upgrades)
// ============================================================================
PARTUPGRADE:NEEDS[FeatureScience]
{
  name = Improved-Signals
  partIcon = longAntenna
  techRequired = basicScience
  entryCost = 1000
  title = Increase data rates
  manufacturer = KT&T
  description = Latest developments in radio and telecommunications allow for higher transmission rates
}

PARTUPGRADE:NEEDS[FeatureScience]
{
  name = Advanced-Encoding
  partIcon = HighGainAntenna5
  techRequired = electronics
  entryCost = 3500
  title = Signal Processor Boost
  manufacturer = KT&T
  description = Multiband transmission give a big boost in transmission rates
}