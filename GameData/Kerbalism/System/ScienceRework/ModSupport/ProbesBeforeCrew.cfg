// ============================================================================
// Patching temporary tweaking values, for consistency and ease of tweaking
// ============================================================================
@KERBALISM_EXPERIMENT_VALUES:NEEDS[CommunityTechTree,FeatureScience,ProbesBeforeCrew]:FOR[Kerbalism]
{
	telemetryReport 
	{
		ECCost = 0.0275     // antenna's gonna be on anyways
		size = 0.51         // i just pulled this number outta you know where
		value = 2
		duration = 180
	}
}

// ============================================================================
// Because PBC adds experiments in a FOR[ProbesBeforeCrew] (no idea why),
// I have to add the Experiment now, to be in line with the rest of the module definitions
// ============================================================================

@PART[*]:HAS[@MODULE[ModuleCommand],#vesselType[Probe]]:NEEDS[CommunityTechTree,FeatureScience,ProbesBeforeCrew]:FOR[Kerbalism]
{
	MODULE
	{
		name = Experiment
		experiment_id = telemetryReport
	}
}

// ============================================================================
// Patching the module, again, in line with what was done with stock, for consistency
// ============================================================================
@PART[*]:HAS[@MODULE[Experiment]:HAS[#experiment_id[telemetryReport]]]:NEEDS[CommunityTechTree,FeatureScience,ProbesBeforeCrew]:AFTER[Kerbalism]
{
	@MODULE[Experiment]:HAS[#experiment_id[telemetryReport]]
	{
		ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/telemetryReport/ECCost$
		data_rate = #$@KERBALISM_EXPERIMENT_VALUES/telemetryReport/size$
		@data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/telemetryReport/duration$
	}
}
// ============================================================================
// Patching the experiment definition, applying the values above.
// ============================================================================
@EXPERIMENT_DEFINITION:HAS[#id[telemetryReport]]:NEEDS[CommunityTechTree,FeatureScience,ProbesBeforeCrew]:AFTER[Kerbalism]
{
	@baseValue = #$@KERBALISM_EXPERIMENT_VALUES/telemetryReport/value$
	@dataScale = #$@KERBALISM_EXPERIMENT_VALUES/telemetryReport/size$
	@dataScale /= #$baseValue$
}
// ============================================================================
// Nuking the stock module, because it's added much later in the patching process.
// ============================================================================
@PART[*]:HAS[@MODULE[ModuleScienceExperiment]:HAS[#experimentID[telemetryReport]]]:NEEDS[CommunityTechTree,FeatureScience,ProbesBeforeCrew]:AFTER[ProbesBeforeCrew]
{
	!MODULE[ModuleScienceExperiment]:HAS[#experimentID[telemetryReport]] {}
}

// ====================================================================================================================================================================================================================================
																					// Stock Probe HDD Rebalance
// ====================================================================================================================================================================================================================================

//NEEDS DOING