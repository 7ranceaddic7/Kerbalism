//attempts to give each part some individual and unique function for Kerbalism 
//Balanced? far from it. This is how I would configure them. Modify as you wish.
//======================================================================================================================================
//solar power plant, battery, O2+H2 fuel cell, bunch of Hydrogen/Oxygen for the fuel cell(roughly 4 day's worth running at 100% without recyclers taken into account)
//removes lab and everything about it.
//nerfs crew capacity to 1 due to all the storage/utility (has to run BEFORE kerbalism, so it sets the ECLSS capacity correctly)

@PART[SSTU-ST-DOS-PWR]:BEFORE[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	@CrewCapacity = 1
}
@PART[SSTU-ST-DOS-PWR]:FOR[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	!MODULE[ModuleScienceLab] {}
	!MODULE[ModuleScienceConverter] {}
	!MODULE[ModuleKerbNetAccess] {}
	@description = SSTU - StationCore - DOS-PWR - The Dockable Orbital Segment series of station modules offer an affordable selection of station modules for the construction of orbital installations.  This particular module is intended to serve as a power generation unit.
	
	MODULE
		{
			name = ProcessController
			resource = _FuelCell
			title = Fuel cell
			capacity = 5
		}

	MODULE:NEEDS[FeatureReliability]
		{
			name = Reliability
			type = ProcessController
			title = Fuel Cell
			redundancy = Power Generation
			repair = Engineer
			mtbf = 72576000
			extra_cost = 1.0
			extra_mass = 0.5
		}
	
	@RESOURCE[ElectricCharge]
		{
		@amount /= 2
		@maxAmount /= 2
		}
				
//======================================================================================================================================
//adds fuel for the fuel cell. this is intended as a short term failsafe in case ALL your other power generation fails (higher MTBF on fuel cells)
	RESOURCE
		{
		name = Hydrogen					//equiv to 1x Huge Pressurized Tank from kerbalism
		amount = 721070
		maxAmount = 721070		
		}
		
		RESOURCE
		{
		name = Oxygen					//equiv to 1.8x Huge Pressurized Tank from kerbalism. balanced against the hydrogen: 1 Oxygen for 2 Hydrogen.
		amount = 360535
		maxAmount = 360535				
		}
		
}

//======================================================================================================================================
//Comfort options, following the description of the part itself
//shamelessly "borrowed" this part from the SSTU cfg file in kerbalism Support folder and added a TV on top of it.

@PART[SSTU-ST-DOS-FEM]:FOR[Kerbalism]:NEEDS[Kerbalism,SSTU]
{	
	@RESOURCE[ElectricCharge]
		{
		@amount /= 20
		@maxAmount /= 20
		}

	@RESOURCE[Aerozine50]
		{
		@amount /= 4
		@maxAmount /= 4
		}
	
	@RESOURCE[NTO]
		{
		@amount /= 4
		@maxAmount /= 4
		}
		
	MODULE:NEEDS[FeatureComfort]
		{
			name = Comfort
			bonus = exercise
			desc = A treadmill designed to permit exercise in zero-g is included. The crew will love it.
		}

	MODULE:NEEDS[FeatureComfort]
		{
			name = Comfort
			bonus = panorama
			desc = The cupola offer a relaxing panoramic view of the void of space.
		}

	MODULE:NEEDS[FeatureComfort] 
		{
			name = Sickbay
			resource = _SickbayTV
			title = TV
			desc = A tranquilizing vortex (TV) uses low quality distraction to put the crew into a state of apathy. It also relieves some of the stress, effects on dumbness are said to be hearsay.
			slots = 0

		UPGRADES 
			{
			UPGRADE 
				{
				name__ = Upgrade-TV
				techRequired__ = advExploration
				cureEverybody = True
				}
			}
	}
	
	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = Comfort
		title = Treadmill
		repair = Engineer
		mtbf = 36288000
		extra_cost = 0.25
		extra_mass = 0.05
	}

	@tags ^= :$: comfort:
}

//======================================================================================================================================
//modifies the reaction wheels to be stronger for attitude control. Adds a Active shield, same stats as kerbalism's default active shield.

@PART[SSTU-ST-DOS-COM]:FOR[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	@RESOURCE[ElectricCharge]
		{
		@amount /= 20
		@maxAmount /= 20
		}

	@RESOURCE[Aerozine50]
		{
		@amount /= 4
		@maxAmount /= 4
		}
	
	@RESOURCE[NTO]
		{
		@amount /= 4
		@maxAmount /= 4
		}
		
	@MODULE[ModuleReactionWheel]
		{ 	
			@PitchTorque = 30
			@YawTorque = 30
			@RollTorque = 30	
			@RESOURCE[ElectricCharge]
				{
					@rate = 10
				}
		}
	
	MODULE
	{
		name = Emitter
		radiation = -0.0000011110 // -0.004 rad/h
		toggle = true
		ec_rate = 8.724
		active = e10
	}
  
}

//======================================================================================================================================
//adds more life support resource volume(more food, more water, oxygen, etc) - enough to support 3 kerbals for 90 days before recyclers.
//Due to all the storage, nerfs crew capacity to 2.

@PART[SSTU-ST-DOS-HAB]:BEFORE[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	@CrewCapacity = 2
}

@PART[SSTU-ST-DOS-HAB]:FOR[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	RESOURCE
		{
			name = Food
			amount = 69.7
			maxAmount = 69.7				
		}

	RESOURCE
		{
			name = Water
			amount = 35.7
			maxAmount = 35.7				
		}

	RESOURCE
		{
			name = Oxygen
			amount = 9537
			maxAmount = 9537				
		}

	RESOURCE
		{
			name = Nitrogen
			amount = 1500
			maxAmount = 1500			
		}
		
	@RESOURCE[ElectricCharge]
		{
		@amount /= 20
		@maxAmount /= 20
		}

	@RESOURCE[Aerozine50]
		{
		@amount /= 4
		@maxAmount /= 4
		}
	
	@RESOURCE[NTO]
		{
		@amount /= 4
		@maxAmount /= 4
		}
}

//======================================================================================================================================
//No changes to the SSTU-ST-DOS-LAB laboratory besides resources, Kerbalism itself takes care of the labs.
//left crew capacity at 3, to give you an advantage over the stock lab (read: a reason to use it, 3 scientists= faster sample analysis)
@PART[SSTU-ST-DOS-LAB]:FOR[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	@RESOURCE[ElectricCharge]
		{
		@amount /= 20
		@maxAmount /= 20
		}

	@RESOURCE[Aerozine50]
		{
		@amount /= 4
		@maxAmount /= 4
		}
	
	@RESOURCE[NTO]
		{
		@amount /= 4
		@maxAmount /= 4
		}
}
//======================================================================================================================================
//Had no idea what to do with this bit, so RDU it is.
//nerfs crew capacity to 2, matching RDU slots
@PART[SSTU-ST-DOS-TKS]:BEFORE[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	@CrewCapacity = 2
}
@PART[SSTU-ST-DOS-TKS]:FOR[Kerbalism]:NEEDS[Kerbalism,SSTU]
{
	@description = SSTU - StationCore - DOS-TKS - The Dockable Orbital Segment series of station modules offer an affordable selection of station modules for the construction of orbital installations.  This particular module is intended to serve as a radiation shield and detox unit.  Also includes habitation and storage for a crew of three for short durations.
	!MODULE[ModuleScienceLab] {}
	!MODULE[ModuleScienceConverter] {}
	!MODULE[ModuleKerbNetAccess] {}

	@RESOURCE[ElectricCharge]
		{
		@amount /= 20
		@maxAmount /= 20
		}

	@RESOURCE[Aerozine50]
		{
		@amount /= 4
		@maxAmount /= 4
		}
	
	@RESOURCE[NTO]
		{
		@amount /= 4
		@maxAmount /= 4
		}
	
   MODULE 
   {
		name = Sickbay
		resource = _SickbayRDU
		title = RDU
		desc = The Radiation Detoxication Unit (RDU) uses EC and Oxygen to reduce the effects of radiation poisoning.
		slots = 0

		UPGRADES 
			{
			UPGRADE 
				{
					name__ = Upgrade-HitchhikerRDU
					techRequired__ = advScienceTech
					slots = 2
				}
			}
	}
}