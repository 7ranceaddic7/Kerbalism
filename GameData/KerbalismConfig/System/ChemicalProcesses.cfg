PARTUPGRADE:NEEDS[ProfileDefault]
{
  name = chemicalRefined
  partIcon = kerbalism-chemicalplant
  techRequired = precisionEngineering
  entryCost = 10000
  title = Refined chemical processes
  description = Adds refined chemical processes
  manufacturer = Lambda Aerospace
}

PARTUPGRADE:NEEDS[ProfileDefault]
{
  name = chemicalMining
  partIcon = kerbalism-chemicalplant
  techRequired = advScienceTech
  entryCost = 30000
  title = Chemical processes for mining operations
  description = Adds chemical processes to convert ore and other minerals
  manufacturer = Lambda Aerospace
}

// ---------------------------------------------------------------------------
// setup section switches for the chemical plants
// ---------------------------------------------------------------------------

@PART[*]:HAS[#KerbalismChemicalPlant]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemical*]],*
	{
		SUBTYPE
		{
			name = _WaterElectrolysis
			title = #KERBALISM_WaterElectrolysis_title
			descriptionSummary = #KERBALISM_WaterElectrolysis_desc
			primaryColor = AquaBlue
		}

		SUBTYPE
		{
			name = _Sabatier
			title = #KERBALISM_SabatierProcess_title
			descriptionSummary = #KERBALISM_SabatierProcess_desc
			primaryColor = #880044
			secondaryColor = #ffff00
		}

		SUBTYPE
		{
			name = _Haber
			title = #KERBALISM_HaberProcess_title
			descriptionSummary = #KERBALISM_HaberProcess_desc
			primaryColor = #880044
			secondaryColor = #ffff00
		}

		SUBTYPE
		{
			name = _WasteIncinerator
			title = #KERBALISM_WasteIncinerator_title
			descriptionSummary = #KERBALISM_WasteIncinerator_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			tech = precisionEngineering
		}

		SUBTYPE
		{
			name = _WasteCompressor
			title = #KERBALISM_WasteCompressor_title
			descriptionSummary = #KERBALISM_WasteCompressor_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalRefined
		}

		SUBTYPE
		{
			name = _Anthraquinone
			title = #KERBALISM_AnthraquinoneProcess_title
			descriptionSummary = #KERBALISM_AnthraquinoneProcess_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalRefined
		}

		SUBTYPE
		{
			name = _HydrazineProduction
			title = #KERBALISM_HydrazineProduction_title
			descriptionSummary = #KERBALISM_HydrazineProduction_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalRefined
		}

		SUBTYPE
		{
			name = _NitroHydrazine
			title = #KERBALISM_HydrazineProductionN2_title
			descriptionSummary = #KERBALISM_HydrazineProductionN2_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalRefined
		}

		SUBTYPE
		{
			name = _MRE
			title = #KERBALISM_MoltenRegolithElectrolysis_title
			descriptionSummary = #KERBALISM_MoltenRegolithElectrolysis_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalMining
		}

		SUBTYPE
		{
			name = _SOE
			title = #KERBALISM_SolidOxideElectrolysis_title
			descriptionSummary = #KERBALISM_SolidOxideElectrolysis_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalMining
		}

		SUBTYPE
		{
			name = _SCO
			title = #KERBALISM_SelectiveCatalyticOxidation_title
			descriptionSummary = #KERBALISM_SelectiveCatalyticOxidation_desc
			primaryColor = #880044
			secondaryColor = #ffff00
			upgradeRequired = chemicalMining
		}
	}
}

// ---------------------------------------------------------------------------
// add ModuleKsmProcessController configuration to the chemical subtypes
// ---------------------------------------------------------------------------

@PART[*]:HAS[#KerbalismChemicalPlant]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[chemical*]],*
	{
		@SUBTYPE,*
		{
			MODULE
			{
				IDENTIFIER {
					name = ModuleKsmProcessController
					id = #$../../../moduleID$
				}
				DATA {
					resource = #$../../name$
					title = #$../../title$
				}
			}
		}
	}
}
