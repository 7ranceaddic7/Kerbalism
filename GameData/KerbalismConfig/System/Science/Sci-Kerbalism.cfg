//==============================================================================
// Telemetry report
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
	TelemetryReport
	{
		ECCost = 0.052
		size = 0.75
		value = 2
		duration = 30
	}
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_TELEMETRY
	title = #kerbalism-experiment-telemetry-title

  KERBALISM_EXPERIMENT
	{
    Situation = SrfLanded@Biomes
    Situation = SrfSplashed@Biomes
    Situation = FlyingLow@Biomes
    Situation = FlyingHigh@Biomes
    Situation = InSpaceLow
    Situation = InSpaceHigh
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_TELEMETRY]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/TelemetryReport/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/TelemetryReport/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_TELEMETRY]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_TELEMETRY]]
  {
    data_rate = #$@KERBALISM_SCIENCE_VALUES/TelemetryReport/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/TelemetryReport/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/TelemetryReport/ECCost$
  }
}

//==============================================================================
// Geiger counter
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
	GeigerCounter
	{
		ECCost = 0.005
		size = 0.5
		value = 4
		duration = 400
	}
}

EXPERIMENT_DEFINITION
{
	id = geigerCounter
	title = #KERBALISM_EXPERIMENT_Radiation_title
	baseValue = 1
	scienceCap = 1
	dataScale = 1

  KERBALISM_EXPERIMENT
	{
		VirtualBiome = NoBiome
		VirtualBiome = InnerBelt
		VirtualBiome = OuterBelt
		VirtualBiome = Magnetosphere
    VirtualBiome = Storm
    VirtualBiome = Interstellar

    Situation = Surface@Biomes
    Situation = FlyingLow
    Situation = FlyingHigh
    Situation = Space@VirtualBiomes
	}

	RESULTS
	{
		default = #KERBALISM_EXPERIMENT_Radiation_default//Holy cow these results are amazing!.
		MohoSrfLanded = #KERBALISM_EXPERIMENT_Radiation_MohoSrfLanded//The Geiger counter agrees that Moho would be cooler with lava. The KSC has informed you that talking to the Geiger counter is strictly forbidden.
		EveSrfLanded = #KERBALISM_EXPERIMENT_Radiation_EveSrfLanded//It seems that high radiation levels are the one thing you don't have to worry about on the surface of Eve.
		GillySrfLanded = #KERBALISM_EXPERIMENT_Radiation_GillySrfLanded//You are having too much fun bouncing around to check the radiation levels.
		KerbinSrfLanded = #KERBALISM_EXPERIMENT_Radiation_KerbinSrfLanded//Radiation levels are quite literally nominal here on Kerbin. Something must be blocking the radiation.
		MunSrfLanded = #KERBALISM_EXPERIMENT_Radiation_MunSrfLanded//Radiation on the surface of the Mun is fairly high, any future habitation would require more shielding.
		MinmusSrfLanded = #KERBALISM_EXPERIMENT_Radiation_MinmusSrfLanded//Looking at the radiation levels, you regret tasting the surface of Minmus.
		DunaSrfLanded = #KERBALISM_EXPERIMENT_Radiation_DunaSrfLanded//These results are critical for the development of a Duna colony. Shame if something were to happen to them...
		IkeSrfLanded = #KERBALISM_EXPERIMENT_Radiation_IkeSrfLanded//The surface contains a trace amount of radioactive compounds, R&D believed these are elements created by interactions between solar wind and Duna's atmosphere.
		DresSrfLanded = #KERBALISM_EXPERIMENT_Radiation_DresSrfLanded//Cross referencing these results with surface samples, Dres seems to consist of a large amount of heavy, radioactive metals
		LaytheSrfLanded = #KERBALISM_EXPERIMENT_Radiation_LaytheSrfLanded//Laythe's atmosphere and active core protect its surface from Jool's intense radiation belt, but the background radiation is significantly higher than Kerbin's
		VallSrfLanded = #KERBALISM_EXPERIMENT_Radiation_VallSrfLanded//Vall is fortunate enough to not be located in Jool's radiation belt, but the radiation on the surface is still significant.
		TyloSrfLanded = #KERBALISM_EXPERIMENT_Radiation_TyloSrfLanded//The functioning magnetosphere Tylo possesses is enough to shield the planet from most of Jool's radiation, but its lack of atmosphere means a significant amount of radiation still reaches the surface
		BopSrfLanded = #KERBALISM_EXPERIMENT_Radiation_BopSrfLanded//KSC warns against trying to locate the intense source of radiation they spotted from orbit.
		PolSrfLanded = #KERBALISM_EXPERIMENT_Radiation_PolSrfLanded//It seems that Pol contains a large amount of radioactive Hydrogen and Helium isotopes, deposited by Jool over thousands of years.
		EelooSrfLanded = #KERBALISM_EXPERIMENT_Radiation_EelooSrfLanded//This far from Kerbol, much more interstellar radiation reaches the surface. This would be a great place for future study
		EveFlyingLow = #KERBALISM_EXPERIMENT_Radiation_EveFlyingLow//Eve's thick atmosphere and large magnetosphere prevents any radiation from reaching this altitude.
		KerbinFlyingLow = #KERBALISM_EXPERIMENT_Radiation_KerbinFlyingLow//The vibrations from your rocket make the dials unreadable, so you decide to make up the results.
		DunaFlyingLow = #KERBALISM_EXPERIMENT_Radiation_DunaFlyingLow//The atmosphere seems to block more radiation then originally predicted. This bodes well for future Duna missions.
		JoolFlyingLow = #KERBALISM_EXPERIMENT_Radiation_JoolFlyingLow//You go to check the Geiger counter, but it refuses to display a reading until you take it out of the atmosphere.
		LaytheFlyingLow = #KERBALISM_EXPERIMENT_Radiation_LaytheFlyingLow//The oceans below emit an unexpected amount of radiation.
		EveFlyingHigh = #KERBALISM_EXPERIMENT_Radiation_EveFlyingHigh//You are too busy trying not to burn up in the atmosphere to look at the Geiger counter.
		KerbinFlyingHigh = #KERBALISM_EXPERIMENT_Radiation_KerbinFlyingHigh//The atmosphere is absorbing most of the radiation, even up there.
		DunaFlyingHigh = #KERBALISM_EXPERIMENT_Radiation_DunaFlyingHigh//The atmosphere here is emitting large amounts of ionized particles.
		JoolFlyingHigh = #KERBALISM_EXPERIMENT_Radiation_JoolFlyingHigh//The KSC has insured that your third eye is completely normal.
		LaytheFlyingHigh = #KERBALISM_EXPERIMENT_Radiation_LaytheFlyingHigh//The radiation from Jool produces interesting by-products when it bombards Laythe's atmosphere
		SunInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_SunInSpaceLow//It's over 9000!!
		MohoInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_MohoInSpaceLow//R&D informs you that these results have contributed to a scientific breakthrough. You are too busy hugging the air conditioner to care.
		EveInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_EveInSpaceLow//Eve's atmosphere emits strange ions that throw off your readings.
		GillyInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_GillyInSpaceLow//The radiation levels here flux because of Gilly's eccentric orbit and Eve's magnetosphere.
		KerbinInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_KerbinInSpaceLow//The radiation environment up there is more complex than we throught. This should give R&D something new to study.
		MunInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_MunInSpaceLow//You notice a steady pulse of radiation as you pass over the dark side of the Mun. It's probably nothing.
		MinmusInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_MinmusInSpaceLow//The results indicate that Minmus has large amounts of radioactive compounds mixed within the icy crust.
		DunaInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_DunaInSpaceLow//The sun is stripping away Duna's fragile atmosphere, as Duna is emitting a stream of ionized particles.
		IkeInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_IkeInSpaceLow//Ike's close orbit and tidally locked state means that when you are over the side of Ike facing Duna the radiation levels drop immensely.
		DresInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_DresInSpaceLow//The Geiger counter has detected large amounts of radiation originating from Dres.
		JoolInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_JoolInSpaceLow//KSC has advised that you will not be allowed to return for fear that you will contaminate the rest of Kerbalkind
		LaytheInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_LaytheInSpaceLow//As you look down at the beautiful ocean below, you forget that you are slowly dying of radiation poisoning.
		VallInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_VallInSpaceLow//Amazingly, the radiation levels are at a reasonable level.
		TyloInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_TyloInSpaceLow//The subtle magnetosphere of Tylo acts as a generator, magnifying Jool's already intense radiation field.
		BopInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_BopInSpaceLow//Bop has an abnormally high amount of radiation that seems to be pin-pointed at 68 degrees north, 114 degrees east. Strange
		PolInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_PolInSpaceLow//The space around Pol is filled with radioactive ions that have been unfortunate enough to be caught by Jool's magnetosphere.
		EelooInSpaceLow = #KERBALISM_EXPERIMENT_Radiation_EelooInSpaceLow//R&D is keen to study what effects the large amount of interstellar radiation has done to the surface of Eeloo.
		SunInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_SunInSpaceHigh//The KSC informs you that they *may* have forgotten to add the shielding.
		MohoInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_MohoInSpaceHigh//The radiation from the sun has picked up dramatically over the course of your journey.
		EveInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_EveInSpaceHigh//You are not looking forward to traveling through Eve's radiation belt.
		GillyInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_GillyInSpaceHigh//You refuse to check the radiation levels unless the KSC stops making Potato puns.
		KerbinInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_KerbinInSpaceHigh//This place is dangerous.
		MunInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_MunInSpaceHigh//You crossed Kerbin's radiation belt, and did not die. You worry that this will spawn a bunch of crazy conspiracy theories.
		MinmusInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_MinmusInSpaceHigh//You pick up an abnormal amount of radiation, but can't figure out the origin.
		DunaInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_DunaInSpaceHigh//Duna doesn’t seem to have a magnetosphere, so cosmic radiation will be a problem for future Duna missions.
		IkeInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_IkeInSpaceHigh//Unexpectedly, Ike appears to be magnetic enough to mess with the ion's striped from Duna's atmosphere.
		DresInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_DresInSpaceHigh//In the asteroid, nobody can hear you face palm when you realise that you forgot the Geiger counter.
		JoolInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_JoolInSpaceHigh//The radiation being emitted from Jool is a staggering amount, and you start to wish you were on the Duna exploration mission.
		LaytheInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_LaytheInSpaceHigh//Laythe is, incredibly, putting up a large resistance to the onslaught of Jool's radiation belt. God speed Laythe. God speed.
		VallInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_VallInSpaceHigh//Even though Vall isn't located in the main radiation belt, it is still viciously punished by Jool's radiation.
		TyloInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_TyloInSpaceHigh//The radiation from Jool forms an intense belt around Tylo, but luckily it doesn’t look like much reaches the surface. But much is a relative term.
		BopInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_BopInSpaceHigh//Bop actually seems to be a source of intense radiation, but amongst Jool's radiation field, it doesn’t appear significant.
		PolInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_PolInSpaceHigh//Pol is far enough away from Jool that it receives ionized isotopes sourced from Jool's magnetosphere and interplanetary gas.
		EelooInSpaceHigh = #KERBALISM_EXPERIMENT_Radiation_EelooInSpaceHigh//As Kerbol's influence weakens, interstellar radiation becomes much more pronounced. The secrets of the galaxy lay open to you.
	}
}

@PART[*]:HAS[@MODULE:HAS[#experimentID[geigerCounter]]]:NEEDS[KerbalismScience]
{
	!MODULE:HAS[#experimentID[geigerCounter]]	{}
	MODULE
	{
		name = ModuleKsmExperiment
		experiment_id = geigerCounter
    data_rate = #$@KERBALISM_SCIENCE_VALUES/GeigerCounter/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/GeigerCounter/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/GeigerCounter/ECCost$
    allow_shrouded = False
  }
}

//==============================================================================
// TRAPPED
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  TRAPPED
  {
    ECCost = 2.67
    size = 5838274
    value = 60
    duration = 19958400
    CrewRequirement = Scientist:2
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_TRAPPED
	title = #kerbalism-experiment-trapped-title
	baseValue = 250
	scienceCap = 250
	dataScale = 1

  KERBALISM_EXPERIMENT
	{
    Situation = SrfLanded
    BodyNotAllowed = HomeBody
    SampleMass = 0.015
	}
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_TRAPPED]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_TRAPPED]]
  {
    experiment_desc = #kerbalism-experiment-trapped-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/TRAPPED/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/TRAPPED/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/TRAPPED/ECCost$
    crew_operate = #$@KERBALISM_SCIENCE_VALUES/TRAPPED/CrewRequirement$
  }
}

//==============================================================================
// CHILLED
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  CHILLED
  {
    ECCost = 4.62
    size = 22568
    value = 55
    duration = 4320000
    requirements = Greenhouse
    CrewRequirement = Scientist:1
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_CHILLED
	title = #kerbalism-experiment-chilled-title

  KERBALISM_EXPERIMENT
	{
    Situation = SrfLanded
    Situation = SrfSplashed
    Situation = InSpaceLow
    BodyNotAllowed = HomeBody
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_CHILLED]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/CHILLED/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/CHILLED/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_CHILLED]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_CHILLED]]
  {
    experiment_desc = #kerbalism-experiment-chilled-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/CHILLED/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/CHILLED/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/CHILLED/ECCost$
    crew_operate = #$@KERBALISM_SCIENCE_VALUES/CHILLED/CrewRequirement$
  }
}

//==============================================================================
// FLIGHT
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  FLIGHT
  {
    ECCost = 5.18
    size = 2359
    value = 10
    duration = 302400
    requirements = CrewMin:2,AstronautComplexLevelMin:2,AdministrationLevelMin:2,MissionControlLevelMin:2
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_FLIGHT
	title = #kerbalism-experiment-flight-title

  KERBALISM_EXPERIMENT
	{
    Situation = InSpaceLow@Biomes
    Situation = SrfLanded@Biomes
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_FLIGHT]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/FLIGHT/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/FLIGHT/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_FLIGHT]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_FLIGHT]]
  {
    experiment_desc = #kerbalism-experiment-flight-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/FLIGHT/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/FLIGHT/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/FLIGHT/ECCost$
    requires = #$@KERBALISM_SCIENCE_VALUES/FLIGHT/requirements$
  }
}

//==============================================================================
// FLOAT
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  FLOAT
  {
    ECCost = 5.82
    size = 1428
    value = 45
    duration = 3888000
    requirements = CrewMin:4,VolumePerCrewMin:8,Treadmill
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_FLOAT
	title = #kerbalism-experiment-float-title

  KERBALISM_EXPERIMENT
	{
    Situation = InSpaceLow
    BodyAllowed = HomeBodyAndMoons
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_FLOAT]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/FLOAT/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/FLOAT/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_FLOAT]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_FLOAT]]
  {
    experiment_desc = #kerbalism-experiment-float-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/FLOAT/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/FLOAT/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/FLOAT/ECCost$
    requires = #$@KERBALISM_SCIENCE_VALUES/FLOAT/requirements$
  }
}

//==============================================================================
// LEAVE
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  LEAVE
  {
    ECCost = 17.94
    size = 3398
    value = 28
    duration = 11102400
    requirements = CrewMin:4,VolumePerCrewMin:20,Treadmill,Cupola
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_LEAVE
	title = #kerbalism-experiment-leave-title
	baseValue = 120
	scienceCap = 120
	dataScale = 1

  KERBALISM_EXPERIMENT
	{
    Situation = SrfLanded@Biomes
    Situation = Space
    BodyNotAllowed = HomeBodyAndMoons
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_LEAVE]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/FLOAT/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/FLOAT/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_LEAVE]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_LEAVE]]
  {
    experiment_desc = #kerbalism-experiment-leave-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/LEAVE/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/LEAVE/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/LEAVE/ECCost$
    requires = #$@KERBALISM_SCIENCE_VALUES/LEAVE/requirements$
  }
}

//==============================================================================
// CLAM
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  CLAM										// underwater only. biomes if relevant.
  {
    ECCost = 1.37
    size = 2593
    value = 24
    duration = 648000
    requirements = CrewMin:2,AltitudeMax:-100,VolumePerCrewMax:5
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_CLAM
	title = #kerbalism-experiment-clam-title
	baseValue = 75
	scienceCap = 75
	dataScale = 1

  KERBALISM_EXPERIMENT
	{
    Situation = SrfSplashed@Biomes
    BodyNotAllowed = HomeBody
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_CLAM]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/CLAM/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/CLAM/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_CLAM]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_CLAM]]
  {
    experiment_desc = #kerbalism-experiment-clam-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/CLAM/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/CLAM/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/CLAM/ECCost$
    requires = #$@KERBALISM_SCIENCE_VALUES/CLAM/requirements$
  }
}

//==============================================================================
// LITE
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  Lite
  {
    ECCost = 0.03
    size = 0.25
    value = 2
    duration = 10
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_LITE
	title = #kerbalism-experiment-lite-title

  KERBALISM_EXPERIMENT
	{
    Situation = InSpaceLow
    Situation = InSpaceHigh
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_LITE]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/Lite/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/Lite/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_LITE]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_LITE]]
  {
    experiment_desc = #kerbalism-experiment-lite-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/Lite/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/Lite/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/Lite/ECCost$
  }
}

//==============================================================================
// MITE
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  Mite
  {
    ECCost = 0.085
    size = 3.26
    value = 3
    duration = 755
    requirements = OrbitMinInclination:70,OrbitMaxInclination:120
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_MITE
	title = #kerbalism-experiment-mite-title

  KERBALISM_EXPERIMENT
	{
    Situation = InSpaceLow@Biomes
    Situation = InSpaceHigh
    BodyAllowed = Atmospheric
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_MITE]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/Mite/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/Mite/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_MITE]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_MITE]]
  {
    experiment_desc = #kerbalism-experiment-mite-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/Mite/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/Mite/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/Mite/ECCost$
    requires = #$@KERBALISM_SCIENCE_VALUES/Mite/requirements$
  }
}

//==============================================================================
// SITE
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  Site
  {
    ECCost = 0.15
    size = 12.4
    value = 5
    duration = 3645
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_SITE
	title = #kerbalism-experiment-site-title

  KERBALISM_EXPERIMENT
	{
    Situation = InSpaceLow
    Situation = InSpaceHigh@Biomes
    BodyNotAllowed = Suns
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_SITE]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/Mite/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/Mite/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_SITE]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_SITE]]
  {
    experiment_desc = #kerbalism-experiment-site-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/Site/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/Site/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/Site/ECCost$
  }
}

//==============================================================================
// STAKE
//==============================================================================

// STAKE is an extremely long-term lab experiment that requires a very expensive
// resource to run. That resource needs to be resupplied from home and cannot
// be generated in-situ. The experiment only runs in space around the home body.
// Essentially, it can turn money into science points if you have a crewed space
// lab with a good scientist.

RESOURCE_DEFINITION:NEEDS[KerbalismScience]
{
  name = StakeGranulate
  displayName = #kerbalism-resource-stakeGranulate
  density = 1.2
  unitCost = 3500 // expensive. very, very expensive.
  flowMode = ALL_VESSEL
  isTweakable = true
  isVisible = true
  volume = 1
}

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  Stake
  {
    ECCost = 0.05
		duration = 226800000 // 25 kerbin years
    size = 500000000 // this will spread out over the extremely long duration
    value = 3000 // extremely high value, but 25 years and very expensive
		requirements = CrewMin:2
		CrewRequirement = Scientist@1
		resources = StakeGranulate@0.1
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_STAKE
	title = #kerbalism-experiment-stake-title

  KERBALISM_EXPERIMENT
	{
    Situation = Space
    BodyAllowed = HomeBody
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_STAKE]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/Mite/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/Mite/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_STAKE]]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]:HAS[#experiment_id[kerbalism_STAKE]]
  {
    experiment_desc = #kerbalism-experiment-stake-desc
    data_rate = #$@KERBALISM_SCIENCE_VALUES/Stake/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/Stake/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/Stake/ECCost$
		requires = #$@KERBALISM_SCIENCE_VALUES/Stake/requirements$
		crew_operate = #$@KERBALISM_SCIENCE_VALUES/Stake/CrewRequirement$
		resources = #$@KERBALISM_SCIENCE_VALUES/Stake/resources$
  }
}
