//==============================================================================
// CURVE
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  curve										//Flying High, 1 Hour, no biomes.
  {
    value = 21
    ECCost = 1.18
    size = 1627
    duration = 1892							// 30-ish min
    CrewRequirement = Pilot:1
  }
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_CURVE
	title = #kerbalism-experiment-curve-title

  KERBALISM_EXPERIMENT
	{
    Situation = FlyingHigh
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_CURVE]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/curve/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/curve/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[kerbalism-experiment-curve]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]
  {
    data_rate = #$@KERBALISM_SCIENCE_VALUES/curve/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/curve/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/curve/ECCost$
    CrewRequirement = #$@KERBALISM_SCIENCE_VALUES/curve/CrewRequirement$
  }
}

//==============================================================================
// WING
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  wing
	{
    value = 11
		ECCost = 0.8
		size = 38
		duration = 400
	}
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_WING
	title = #kerbalism-experiment-wing-title

  KERBALISM_EXPERIMENT
	{
    Situation = FlyingLow@Biomes
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_WING]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/wing/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/wing/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[kerbalism-experiment-wing]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]
  {
    data_rate = #$@KERBALISM_SCIENCE_VALUES/wing/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/wing/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/wing/ECCost$
  }
}

//==============================================================================
// CLOUD
//==============================================================================

@KERBALISM_SCIENCE_VALUES:NEEDS[KerbalismScience]
{
  cloud
	{
    value = 20
    ECCost = 1.5
    size = 55
    duration = 510
    CrewRequirement = Pilot:2
	}
}

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_CLOUD
	title = #kerbalism-experiment-cloud-title

  KERBALISM_EXPERIMENT
	{
    Situation = FlyingHigh@Biomes
    Situation = FlyingLow
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_CLOUD]]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  baseValue = #$@KERBALISM_SCIENCE_VALUES/cloud/value$
	dataScale = #$@KERBALISM_SCIENCE_VALUES/cloud/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[kerbalism-experiment-cloud]:NEEDS[KerbalismScience]:AFTER[Kerbalism]
{
  @MODULE[ModuleKsmExperiment]
  {
    data_rate = #$@KERBALISM_SCIENCE_VALUES/cloud/size$
    @data_rate /= #$@KERBALISM_SCIENCE_VALUES/cloud/duration$
    ec_rate = #$@KERBALISM_SCIENCE_VALUES/cloud/ECCost$
    CrewRequirement = #$@KERBALISM_SCIENCE_VALUES/cloud/CrewRequirement$
  }
}
